<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Sinatra, Passenger / Nginx, Wordpress</title>

    <link href="/stylesheets/app.css" rel="stylesheet" type="text/css" />

    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="blog blog_2009 blog_2009_11 blog_2009_11_sinatra-passenger-nginx-wordpress blog_2009_11_sinatra-passenger-nginx-wordpress_index">

    <div class="fixed">
      <nav class="top-bar" data-topbar role="navigation">
        <ul class="title-area">
          <li class="name">
            <h1><a href="/">Sophiant</a></h1>
          </li>
          <li class="toggle-topbar menu-icon">
            <a href="#"><span>Menu</span></a>
          </li>
        </ul>

        <section class="top-bar-section">
          <!-- Right Nav Section -->
          <ul class="right">
            <li><a href="/">Home</a></li>
            <li><a href="/about/">About</a></li>
            <li><a href="/philosophy/">Philosophy</a></li>
            <li class="active"><a href="/blog/">Blog</a></li>
          </ul>
        </section>
      </nav>
    </div>

    <div class="wrapper">
      
<div class="hero-panel hero-panel-smaller">
  <h2>Blog</h2>
</div>


<div class="row">
  <div class="large-10 large-offset-1 columns">
    <article>
      <h1>Sinatra, Passenger / Nginx, Wordpress</h1>
      <p>This blog uses this technology stack (at the time of this writing). I didn't want the basic content pages to running under Wordpress, for a couple of reasons - predominantly because I wanted to use Sinatra and try my hand at Haml. That and a rack config is pretty tight (my entire application is one app.rb file). I pretty much followed the steps outlined by this article to get the basic set up working: http://railsdog.com/blog/2009/06/using-rack-to-combine-sinatra-and-word-press/. However, the web server passenger was running under was for Apache. I finally got this working with the following nginx config snippet.</p>

<!--more -->

<pre lang="bash">
    location / {
passenger_enabled  on;
    }

    location /blog {
passenger_enabled  off;
index          index.html index.htm index.php;

# custom wordpress rewrite for SEO-friendly URLs
#
if (!-e $request_filename) {
    rewrite ^(.+)$ /blog/index.php?q=$1 last;
    break;
}
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ .*.php$ {
try_files  $uri  /404.html;
fastcgi_pass   127.0.0.1:9000;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
include        fastcgi_params;
    }
</pre>

    </article>
  </div>
</div>

    </div>

    <footer>
  <div class="row">
    <div class="medium-4 medium-4 push-8 columns">
      <ul class="home-social">
        <li><a href="https://github.com/sophiant" class="github">Github</a></li>
        <li><a href="mailto:chris@sophiant.com" class="mail">Contact</a></li>
      </ul>
    </div>

    <div class="medium-8 medium-8 pull-4 columns">
      <ul class="address">
        <li>61020 River Bluff Trl.</li>
        <li>&middot;</li>
        <li>Bend, Oregon 97702</li>
        <li>&middot;</li>
        <li>Tel. (541) 719-8763</li>
      </ul>
    </div>
  </div>

  <div class="row">
    <p class="copyright text-center">&copy; 2005&dash;2015 Sophiant, LLC. All rights reserved.</p>
  </div>
</footer>


    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
